{"id":"wt-17d","title":"Add shell-init support for fish","description":"Implement first-class fish shell integration for wt shell-init.\n\nScope and tasks:\n- Extend wt shell-init to accept fish.\n- Add a fish init template in src/commands/shell_init.zig that preserves behavior expectations:\n  - intercept wt new\n  - run wt new --porcelain\n  - on success plus valid directory, change into the new worktree\n  - print a concise confirmation line\n  - pass through all other subcommands to the binary\n- Ensure stderr/stdout routing remains correct for porcelain behavior.\n- Add or expand unit tests for fish template output and key behavior markers.\n- Add or expand CLI argument validation tests to include fish as supported.\n- Update README shell integration section with fish setup instructions and guarded snippets that are safe when wt is not on PATH.\n- Update README supported-shells statement and troubleshooting notes.\n- Confirm wt shell-init fish output is usable in fish startup config (config.fish).\n- Run mise run test and fix regressions.\n\nAcceptance criteria:\n- wt shell-init fish succeeds.\n- Unsupported-shell error message includes fish in the supported set.\n- README documents fish setup and verification.\n- Tests cover fish support and pass.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-23T12:16:16.306169Z","created_by":"jlg","updated_at":"2026-02-23T12:16:16.306169Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-188","title":"[zli-swap] Update tests/docs for zli swap (minimal, KISS)","description":"Adjust existing smoke/help tests and command reference docs only where needed for zli-driven output/wording; keep scope to library swap and associated cleanup.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-24T20:28:36.278393Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676921Z","closed_at":"2026-02-24T20:41:07.676913Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-188","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.950327Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-1ev","title":"Windows target build fails due POSIX termios usage","description":"Running \"mise exec -- zig build -Dtarget=x86_64-windows\" fails. In /Users/jlgeering/src/wt/src/commands/rm.zig (around lines 102-120) and /Users/jlgeering/src/wt/src/commands/init.zig (around lines 49-59), POSIX termios APIs (std.posix.tcgetattr, tcsetattr, std.c.V) are referenced unconditionally. On Windows targets this triggers compile errors (including libc dependency and invalid termios type), breaking the advertised Windows build path.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-22T14:13:08.783462Z","created_by":"jlgeering","updated_at":"2026-02-22T14:13:08.783462Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1f8","title":"[zli-swap] Preserve current CLI behavior and normal exit semantics","description":"Validate command behavior parity for list/new/rm/init/shell-init (args, success/failure paths, stdout/stderr intent) with normal exit codes; adjust command dispatch as needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-24T20:28:33.760851Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.677197Z","closed_at":"2026-02-24T20:41:07.677189Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-1f8","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949970Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-1he","title":"wt list does not mark current worktree when run from subdirectories","description":"wt list compares getCwdAlloc directly to each worktree root path. Running from a nested directory inside the current worktree fails to mark any row as current. Expected: resolve current worktree root (for example via git rev-parse --show-toplevel) and compare roots.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-23T16:01:25.974850Z","created_by":"jlg","updated_at":"2026-02-23T16:01:25.974850Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1l5","title":"wt new reports existing worktree for non-worktree path collisions","description":"wt new currently treats any existing filesystem path at the computed target as an existing worktree and exits success. If a plain directory already exists at that path, the command gives a false success result and downstream shell wrappers may attempt to cd into a path that was never registered as a git worktree. Expected: verify membership in git worktree list --porcelain before returning success; otherwise fail with a clear collision error.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-23T16:01:17.547151Z","created_by":"jlg","updated_at":"2026-02-23T16:02:06.235900Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1n7","title":"Evaluate internal subcommands (__new/__list) instead of --porcelain flags","description":"Context\n- Internal wrappers currently depend on --porcelain output from public commands.\n- There is interest in replacing that with explicit internal commands like __new and __list.\n\nGoal\n- Decide whether moving machine interfaces to internal subcommands improves code clarity and UX boundaries.\n\nDesign options\n1. Keep --porcelain and mark hidden/internal.\n2. Add internal-only subcommands (__new, __list), remove porcelain from public commands.\n3. Hybrid: keep porcelain temporarily with deprecation path to internal subcommands.\n\nEvaluation criteria\n- Clear separation between user-facing UX and internal automation contract.\n- Parser/handler simplicity (shared logic without duplicated branching).\n- Testability of machine output behavior.\n- Backward compatibility for existing wrappers.\n\nAcceptance criteria\n- Decision documented (short ADR or decision note) with chosen option and rationale.\n- If subcommands are chosen, public help no longer exposes machine interface flags.\n- Integration tests cover wrapper-facing command contract.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-24T22:13:33.238706Z","created_by":"jlg","updated_at":"2026-02-24T23:10:26.471663Z","closed_at":"2026-02-24T23:10:26.471648Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-20w","title":"Clarify that --porcelain is internal/unstable","description":"Context\n- Current help advertises --porcelain as a general machine-readable mode.\n- In practice this output is intended only for project shell wrappers and not a stable public interface.\n\nProblem\n- Publicly documented flag implies support/stability and invites external dependency on output shape.\n- That increases compatibility burden for future output changes.\n\nProposed changes\n- Update CLI help text to mark --porcelain as internal and unstable.\n- Optionally hide it from normal help output if parser supports hidden flags.\n- Add maintainer docs for wrapper expectations (where used and change policy).\n\nAcceptance criteria\n- wt list --help and wt new --help clearly indicate internal-only status, or flag is hidden.\n- Maintainer-facing docs explain intended consumers and compatibility expectations.\n- No behavior change for existing wrapper integrations.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-24T22:13:12.453607Z","created_by":"jlg","updated_at":"2026-02-24T23:10:26.522296Z","closed_at":"2026-02-24T23:10:26.522284Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ch","title":"Add shell-init support for Nushell (nochel)","description":"Implement first-class Nushell shell integration for wt shell-init.\n\nScope and tasks:\n- Extend wt shell-init to accept Nushell (requested as nochel).\n- Add a Nushell init template in src/commands/shell_init.zig that preserves behavior expectations:\n  - intercept wt new\n  - run wt new --porcelain\n  - on success plus valid directory, change into the new worktree\n  - print a concise confirmation line\n  - pass through all other subcommands to the binary\n- Ensure stderr/stdout routing remains correct for porcelain behavior.\n- Add or expand unit tests for Nushell template output and key behavior markers.\n- Add or expand CLI argument validation tests to include Nushell as supported.\n- Update README shell integration section with Nushell setup instructions and guarded snippets where applicable.\n- Update README supported-shells statement and troubleshooting notes.\n- Confirm shell-init output is usable in Nushell startup config.\n- Run mise run test and fix regressions.\n\nOpen decision to resolve during implementation:\n- Confirm canonical CLI shell key name (nu vs nushell) and document it consistently.\n\nAcceptance criteria:\n- wt shell-init works for the chosen Nushell key.\n- Unsupported-shell error message includes Nushell support.\n- README documents Nushell setup and verification.\n- Tests cover Nushell support and pass.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-23T12:16:16.305416Z","created_by":"jlg","updated_at":"2026-02-24T21:54:04.158906Z","closed_at":"2026-02-24T21:54:04.158891Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ev","title":"wt init Ctrl-C single-key cancel path is ineffective","description":"/Users/jlgeering/src/wt/src/commands/init.zig includes Ctrl-C cancellation logic in decision parsing, but tryReadSingleKey does not disable ISIG in raw mode (around lines 49-56). On POSIX terminals, Ctrl-C is handled as SIGINT before user-space key handling, so the intended cancel flow does not execute. /Users/jlgeering/src/wt/src/commands/rm.zig sets ISIG=false; init.zig should mirror that behavior if Ctrl-C is intended as an in-flow cancel.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-22T14:13:08.916953Z","created_by":"jlgeering","updated_at":"2026-02-22T14:13:08.916953Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2f1","title":"[zli-swap] Replace yazap with zli command wiring","description":"Swap CLI parsing and help plumbing from yazap to zli in src/main.zig while keeping existing command handlers (list/new/rm/init/shell-init/internal picker) and behavior parity.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:25.692543Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676597Z","closed_at":"2026-02-24T20:41:07.676586Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2f1","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.948415Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-2fw","title":"Set up GitHub Releases distribution pipeline","description":"Define and implement a tag-driven release flow for wt: cross-build supported targets, package assets with stable names, generate SHA256 sums, and publish to GitHub Releases. Include release notes structure and verification steps.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-23T17:01:54.513402Z","created_by":"jlg","updated_at":"2026-02-23T17:01:54.513402Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2rr","title":"Windows target build fails due POSIX termios usage","description":" fails. In  (around lines 102-120) and  (around lines 49-59), POSIX termios APIs (, , ) are referenced unconditionally. On Windows targets this triggers compile errors (including libc dependency and invalid termios type), breaking the advertised Windows build path.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-22T14:12:56.162788Z","created_by":"jlgeering","updated_at":"2026-02-22T14:12:56.162788Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3cl","title":"Enforce versioning strategy in release workflow","description":"Implement policy checks in release automation: require semver input, require matching changelog entry for target version, validate tag format vX.Y.Z, and verify built wt --version matches X.Y.Z before publishing.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-23T17:04:17.267993Z","created_by":"jlg","updated_at":"2026-02-23T17:04:17.267993Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3ek","title":"Fix help footer wording from parser dependency","description":"Current root help footer is malformed (shows wt <command> with -h/--h in broken format). Investigate dependency-level fix in yazap or upgrade/override so footer points users to wt <command> --help.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-23T16:02:31.709927Z","created_by":"jlg","updated_at":"2026-02-23T16:02:41.617184Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3mb","title":"[zli-swap] Epic: replace yazap with zli (+ minimal cleanup)","description":"Scope: library swap only. Replace yazap parsing/help wiring with zli, use native hidden commands for shell-init/internal picker, remove yazap dependency, keep feature parity with cleaner command wiring, and make minimal test/doc updates required by the swap. Explicitly out of scope: product redesign, migration plans, config format changes, rollout/canary strategy, platform matrix changes, or broad behavior changes.","notes":"Merged to main in commits 300cf4b (build wiring) and cbf80db (CLI migration). Rebased zli onto main before merge; worktree/branch zli cleaned up.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-24T20:29:52.878338Z","created_by":"jlg","updated_at":"2026-02-24T20:53:01.212407Z","closed_at":"2026-02-24T20:41:07.706452Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3rp","title":"Add Homebrew tap formula for wt","description":"Create and maintain a Homebrew tap/formula for wt that consumes GitHub Release assets. Depends on finalizing GitHub release artifact naming and checksum process from the GitHub Releases task.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-23T17:01:54.515300Z","created_by":"jlg","updated_at":"2026-02-23T17:02:48.663551Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3rp","depends_on_id":"wt-2fw","type":"blocks","created_at":"2026-02-23T17:02:48.663519Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-3vm","title":"[zli-swap] Remove yazap dependency and update build wiring","description":"Update build.zig/build.zig.zon imports/deps to remove yazap and add zli; ensure zig build run/test still resolve dependencies correctly.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:31.214586Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.675685Z","closed_at":"2026-02-24T20:41:07.675669Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3vm","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949573Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-4xl","title":"Investigate help wrapping in yazap","description":"Follow up on weird wrapping/large spacing in wt --help on smaller terminals. We deferred local custom help output; later evaluate whether yazap exposes configurable help column widths or if we should upstream a fix.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-23T15:23:17.532403Z","created_by":"jlg","updated_at":"2026-02-23T15:23:17.532403Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-8mi","title":"Investigate testing strategy for platform-specific code","description":"Investigate and document ways to test platform-specific code paths (macOS, Linux, Windows) for `wt`.\n\nExpected output:\n- Candidate matrix for local/CI coverage.\n- Strategies for cross-target compile checks vs runtime checks.\n- Practical options for validating OS-conditional behavior and interactive terminal logic.\n- Tradeoffs, limitations, and recommended path.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-22T14:19:08.866969Z","created_by":"jlgeering","updated_at":"2026-02-22T14:19:08.866969Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-92n","title":"Add ahead/behind to wt list output","description":"Enhance wt list to show upstream ahead/behind counts per branch. Add git helper(s) to compute counts and include them in list formatting for clean/dirty worktrees. Handle detached HEAD and missing upstreams gracefully.","status":"open","priority":2,"issue_type":"task","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:23Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-18T05:51:23Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-g5w","title":"Unify completion candidate generation after 4-shell rollout","description":"After completion support exists for all four target shells, move branch/ref candidate generation out of shell scripts into shared wt runtime code (for example internal completion subcommands) so zsh/bash/fish/4th shell use one source of truth for local branches, refs, and rm candidates. Keep shell adapters thin and shell-specific only for rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-24T21:55:15.863652Z","created_by":"jlg","updated_at":"2026-02-24T21:55:15.863652Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-gzx","title":"Dynamic picker widths for long branch names","description":"Adjust picker row layout to handle long branch names and avoid column misalignment. Implement dynamic or capped width sizing for branch/status columns so FZF and builtin views remain readable when branch names are long.","status":"closed","priority":3,"issue_type":"task","assignee":"jlg","created_at":"2026-02-23T15:57:46.375212Z","created_by":"jlg","updated_at":"2026-02-24T20:15:30.909814Z","closed_at":"2026-02-24T20:15:30.909799Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-lcy","title":"Investigate testing strategy for shell integrations","description":"Investigate and document ways to test `wt shell-init` integrations (zsh/bash) in automated and local workflows.\n\nExpected output:\n- Candidate approaches (unit-level, integration-level, shell-level harnesses).\n- How to validate behavior like `wt new --porcelain` capture, `cd` handoff, and stderr/stdout routing.\n- Tradeoffs, reliability risks, and recommended path.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-22T14:19:08.819340Z","created_by":"jlgeering","updated_at":"2026-02-22T14:19:08.819340Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-lgk","title":"[zli-swap] Use zli hidden commands for shell-init/internal commands","description":"Mark shell-init and internal picker command as hidden/private via zli instead of pre-parse hacks so wt --help only shows public commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:29.169254Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676258Z","closed_at":"2026-02-24T20:41:07.676248Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-lgk","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949136Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-nk2","title":"Investigate testing strategy for shell integrations and platform-specific code","description":"Investigate and document practical approaches for:\n\n1. Testing shell integrations (`wt shell-init` wrappers) in automated and local workflows.\n2. Testing platform-specific code paths (macOS/Linux/Windows) with reliable CI and local verification strategies.\n\nExpected output:\n- Proposed test matrix and tool choices.\n- Tradeoffs/limitations for each approach.\n- Recommended next implementation steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T14:18:25.543147Z","created_by":"jlgeering","updated_at":"2026-02-22T14:19:08.911043Z","closed_at":"2026-02-22T14:19:08.911022Z","close_reason":"Split into focused tasks: wt-lcy and wt-8mi","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-vc3","title":"Expand integration coverage for list and rm safety behavior","description":"Add integration tests for list ahead/behind output and rm safety flows, including dirty worktree handling, unmerged commit detection, confirmation behavior, and --force bypass.","status":"open","priority":2,"issue_type":"task","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:24Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-18T05:51:24Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-vc3","depends_on_id":"wt-92n","type":"blocks","created_at":"2026-02-18T06:51:24Z","created_by":"Jean-Luc Geering","metadata":"{}","thread_id":""},{"issue_id":"wt-vc3","depends_on_id":"wt-w1c","type":"blocks","created_at":"2026-02-18T06:51:24Z","created_by":"Jean-Luc Geering","metadata":"{}","thread_id":""}]}
{"id":"wt-vhr","title":"wt new treats tags/refs as existing branches","description":"/Users/jlgeering/src/wt/src/commands/new.zig checks branch existence with \"git rev-parse --verify <name>\" (around line 49). This resolves tags and other refs, not just local branches. Repro: in a repo with tag \"demo\" and no branch \"demo\", \"wt new --porcelain demo\" creates a detached worktree instead of a branch-backed worktree. Branch checks should target refs/heads/<branch> explicitly.","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-22T14:13:08.859348Z","created_by":"jlgeering","updated_at":"2026-02-22T14:13:08.859348Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-w1c","title":"Strengthen wt rm safety checks and confirmation flow","description":"Enhance wt rm to detect unmerged commits before removal and require interactive confirmation for unsafe removals (dirty or unmerged) unless --force is provided.","status":"open","priority":1,"issue_type":"task","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:24Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-18T05:51:24Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-x4p","title":"wt new resolves tags as branches and creates detached worktrees","description":"Branch existence is checked with git rev-parse --verify NAME, which matches tags and other refs. When a tag matches the requested name, wt new logs Using existing branch but creates a detached worktree. Expected: validate against refs/heads/NAME or an equivalent branch-only check before taking the existing-branch path.","status":"open","priority":1,"issue_type":"bug","created_at":"2026-02-23T16:01:25.946223Z","created_by":"jlg","updated_at":"2026-02-23T16:01:25.946223Z","source_repo":".","compaction_level":0,"original_size":0}
