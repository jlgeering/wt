{"id":"wt-17d","title":"Add shell-init support for fish","description":"Implement first-class fish shell integration for wt shell-init.\n\nScope and tasks:\n- Extend wt shell-init to accept fish.\n- Add a fish init template in src/commands/shell_init.zig that preserves behavior expectations:\n  - intercept wt new\n  - run wt new --porcelain\n  - on success plus valid directory, change into the new worktree\n  - print a concise confirmation line\n  - pass through all other subcommands to the binary\n- Ensure stderr/stdout routing remains correct for porcelain behavior.\n- Add or expand unit tests for fish template output and key behavior markers.\n- Add or expand CLI argument validation tests to include fish as supported.\n- Update README shell integration section with fish setup instructions and guarded snippets that are safe when wt is not on PATH.\n- Update README supported-shells statement and troubleshooting notes.\n- Confirm wt shell-init fish output is usable in fish startup config (config.fish).\n- Run mise run test and fix regressions.\n\nAcceptance criteria:\n- wt shell-init fish succeeds.\n- Unsupported-shell error message includes fish in the supported set.\n- README documents fish setup and verification.\n- Tests cover fish support and pass.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-23T12:16:16.306169Z","created_by":"jlg","updated_at":"2026-02-25T14:17:15.117164Z","closed_at":"2026-02-25T14:17:15.117144Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-188","title":"[zli-swap] Update tests/docs for zli swap (minimal, KISS)","description":"Adjust existing smoke/help tests and command reference docs only where needed for zli-driven output/wording; keep scope to library swap and associated cleanup.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-24T20:28:36.278393Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676921Z","closed_at":"2026-02-24T20:41:07.676913Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-188","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.950327Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-19w","title":"Add Nushell runtime parity integration coverage for shell-init wrappers","description":"Important gap: automated runtime parity tests currently execute only zsh/bash. Add Nushell runtime integration coverage for shell-init wrapper behavior (no-arg picker flow, new/add porcelain path handling, relative-subdir preservation/fallback, and location-report behavior) to prevent Nu-specific regressions that unit/script-string tests miss. Ensure CI-safe behavior with clear skip semantics when nu is unavailable.","status":"closed","priority":1,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:04:26.373597Z","created_by":"jlgeering","updated_at":"2026-02-28T07:08:34.338950Z","closed_at":"2026-02-28T07:08:34.338928Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1ch","title":"Expand CI with platform matrix and compile/runtime gates","description":"Follow-up to wt-8mi platform testing strategy.\n\nImplement pragmatic platform coverage in automation:\n- Add a CI matrix for ubuntu-latest, macos-latest, and windows-latest running `mise run test`.\n- Add a cross-target compile gate using `mise run build:all` (at least on ubuntu-latest).\n- Add a convenience mise task `check:platform` that aggregates lint/test/build:all for local and CI use.\n- Keep rollout incremental; avoid PTY harness work in this task.\n\nAcceptance criteria:\n- Workflow covers Linux, macOS, and Windows test execution.\n- Cross-target compile check runs in CI.\n- `mise run check:platform` exists and runs successfully locally.\n- Docs/reference updated where needed to point contributors at the new gate.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-25T14:14:30.143521Z","created_by":"jlgeering","updated_at":"2026-02-25T14:14:44.080996Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1cw","title":"Configure GitHub repository topics","description":"Set repository topics for discoverability and maintenance.\n\nAcceptance criteria:\n- Topics include at least: git, worktree, zig, cli.\n- Topics are visible on the GitHub repository page.\n- Topic list is reviewed for relevance and adjusted if needed.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:25:10.846970Z","created_by":"jlg","updated_at":"2026-02-28T10:26:31.600943Z","closed_at":"2026-02-28T10:26:31.600926Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1ev","title":"Windows target build fails due POSIX termios usage","description":"Running \"mise exec -- zig build -Dtarget=x86_64-windows\" fails. In /Users/jlgeering/src/wt/src/commands/rm.zig (around lines 102-120) and /Users/jlgeering/src/wt/src/commands/init.zig (around lines 49-59), POSIX termios APIs (std.posix.tcgetattr, tcsetattr, std.c.V) are referenced unconditionally. On Windows targets this triggers compile errors (including libc dependency and invalid termios type), breaking the advertised Windows build path.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-22T14:13:08.783462Z","created_by":"jlgeering","updated_at":"2026-02-25T13:36:27.903243Z","closed_at":"2026-02-25T13:36:27.903223Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1f8","title":"[zli-swap] Preserve current CLI behavior and normal exit semantics","description":"Validate command behavior parity for list/new/rm/init/shell-init (args, success/failure paths, stdout/stderr intent) with normal exit codes; adjust command dispatch as needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-24T20:28:33.760851Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.677197Z","closed_at":"2026-02-24T20:41:07.677189Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-1f8","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949970Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-1he","title":"wt list does not mark current worktree when run from subdirectories","description":"wt list compares getCwdAlloc directly to each worktree root path. Running from a nested directory inside the current worktree fails to mark any row as current. Expected: resolve current worktree root (for example via git rev-parse --show-toplevel) and compare roots.","notes":"Implemented fix in src/commands/list.zig:\n- Resolve current worktree root with `git rev-parse --show-toplevel` based on current cwd, with cwd fallback when unavailable.\n- Compare resolved root against worktree rows instead of raw cwd path.\n- Added tests for root resolution behavior (nested repo and fallback path).\n\nValidation:\n- `mise run test` passes.\n- Manual repro from nested directory confirms `__list` marks current row with leading 1.","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-23T16:01:25.974850Z","created_by":"jlg","updated_at":"2026-02-25T14:20:13.138939Z","closed_at":"2026-02-25T14:20:13.138921Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1l5","title":"wt new reports existing worktree for non-worktree path collisions","description":"wt new currently treats any existing filesystem path at the computed target as an existing worktree and exits success. If a plain directory already exists at that path, the command gives a false success result and downstream shell wrappers may attempt to cd into a path that was never registered as a git worktree. Expected: verify membership in git worktree list --porcelain before returning success; otherwise fail with a clear collision error.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-23T16:01:17.547151Z","created_by":"jlg","updated_at":"2026-02-25T13:45:40.072875Z","closed_at":"2026-02-25T13:45:40.069049Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1n7","title":"Evaluate internal subcommands (__new/__list) instead of --porcelain flags","description":"Context\n- Internal wrappers currently depend on --porcelain output from public commands.\n- There is interest in replacing that with explicit internal commands like __new and __list.\n\nGoal\n- Decide whether moving machine interfaces to internal subcommands improves code clarity and UX boundaries.\n\nDesign options\n1. Keep --porcelain and mark hidden/internal.\n2. Add internal-only subcommands (__new, __list), remove porcelain from public commands.\n3. Hybrid: keep porcelain temporarily with deprecation path to internal subcommands.\n\nEvaluation criteria\n- Clear separation between user-facing UX and internal automation contract.\n- Parser/handler simplicity (shared logic without duplicated branching).\n- Testability of machine output behavior.\n- Backward compatibility for existing wrappers.\n\nAcceptance criteria\n- Decision documented (short ADR or decision note) with chosen option and rationale.\n- If subcommands are chosen, public help no longer exposes machine interface flags.\n- Integration tests cover wrapper-facing command contract.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-24T22:13:33.238706Z","created_by":"jlg","updated_at":"2026-02-24T23:10:26.471663Z","closed_at":"2026-02-24T23:10:26.471648Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1od","title":"Implement cross-shell parity integration tests for shell-init wrappers","description":"Add integration coverage validating parity for zsh/bash/fish/nu wrappers: no-arg picker flow, new|add porcelain capture, relative-subdir preservation/fallback, and location-report behavior. Include CI-safe non-interactive checks to catch shell drift.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:29:09.646957Z","created_by":"jlg","updated_at":"2026-02-26T08:07:59.088834Z","closed_at":"2026-02-26T08:07:59.088815Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-1od","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.899731Z","created_by":"jlg","metadata":"{}","thread_id":""},{"issue_id":"wt-1od","depends_on_id":"wt-lcy","type":"blocks","created_at":"2026-02-25T06:29:09.757127Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-1rd","title":"Validate .wt.toml setup paths to prevent traversal outside worktree roots","description":"## Summary\nSetup operations in wt new accept arbitrary rel_path entries from .wt.toml without traversal checks. Paths containing .. can escape the intended repo/worktree roots for copy and symlink operations.\n\n## Evidence\n- copy path join without normalization guard: src/lib/setup.zig:27-30\n- symlink path join without normalization guard: src/lib/setup.zig:97-100\n- all configured paths executed directly: src/lib/setup.zig:178-186\n\n## Expected\nReject or sanitize unsafe path entries (absolute paths, parent traversal) before filesystem operations.\n\n## Risk\nUnintended writes outside worktree boundaries when running configured setup.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-25T06:15:00.288608Z","created_by":"jlg","updated_at":"2026-02-25T13:51:30.930459Z","closed_at":"2026-02-25T13:51:30.930441Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1uz","title":"Shell integration consistency and maintainability roadmap","description":"Coordinate cross-shell behavior parity, shared completion/runtime logic, test coverage, and doc consistency for shell-init integrations (zsh, bash, fish, nu).","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-25T06:29:09.615479Z","created_by":"jlg","updated_at":"2026-02-26T08:17:10.254587Z","closed_at":"2026-02-26T08:17:10.254565Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-1wm","title":"wt init: use symlinks for mise.local.toml and Claude settings","description":"When initializing a worktree, create symlinks instead of file copies for mise.local.toml and the Claude settings file. Ensure behavior is consistent across existing setup flows and covered by tests.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:13:23.838828Z","created_by":"jlgeering","updated_at":"2026-02-28T08:38:11.807710Z","closed_at":"2026-02-28T08:38:11.807689Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-1wm","depends_on_id":"wt-3hb","type":"parent-child","created_at":"2026-02-28T07:57:31.138473Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-1x2","title":"Add CI workflow for baseline checks","description":"Add GitHub Actions CI that runs the baseline quality gate via mise.\n\nAcceptance criteria:\n- Workflow file exists under .github/workflows/.\n- Runs on pull_request and push to main.\n- Executes mise install (or equivalent setup) and mise run check successfully.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-25T06:25:10.846925Z","created_by":"jlg","updated_at":"2026-02-25T14:14:44.080364Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-20w","title":"Clarify that --porcelain is internal/unstable","description":"Context\n- Current help advertises --porcelain as a general machine-readable mode.\n- In practice this output is intended only for project shell wrappers and not a stable public interface.\n\nProblem\n- Publicly documented flag implies support/stability and invites external dependency on output shape.\n- That increases compatibility burden for future output changes.\n\nProposed changes\n- Update CLI help text to mark --porcelain as internal and unstable.\n- Optionally hide it from normal help output if parser supports hidden flags.\n- Add maintainer docs for wrapper expectations (where used and change policy).\n\nAcceptance criteria\n- wt list --help and wt new --help clearly indicate internal-only status, or flag is hidden.\n- Maintainer-facing docs explain intended consumers and compatibility expectations.\n- No behavior change for existing wrapper integrations.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-24T22:13:12.453607Z","created_by":"jlg","updated_at":"2026-02-24T23:10:26.522296Z","closed_at":"2026-02-24T23:10:26.522284Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-21v","title":"Add issue templates and CONTRIBUTING guide","description":"Add contributor-facing templates and guidance for consistent intake.\n\nAcceptance criteria:\n- .github/ISSUE_TEMPLATE includes at least bug and feature templates.\n- Optional config routes users toward templates.\n- CONTRIBUTING.md exists with local setup, test, and PR expectations.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-25T06:25:51.341319Z","created_by":"jlg","updated_at":"2026-02-25T06:25:51.341319Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ad","title":"Add LICENSE file for public repo","description":"Select an OSS license and add a root LICENSE file so GitHub detects licenseInfo.\n\nAcceptance criteria:\n- LICENSE exists at repository root.\n- Chosen license is reflected by GitHub on the repo page.\n- README includes a brief license note (or links to LICENSE).","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:25:10.848122Z","created_by":"jlg","updated_at":"2026-02-28T10:29:45.950453Z","closed_at":"2026-02-28T10:29:45.950435Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ch","title":"Add shell-init support for Nushell (nochel)","description":"Implement first-class Nushell shell integration for wt shell-init.\n\nScope and tasks:\n- Extend wt shell-init to accept Nushell (requested as nochel).\n- Add a Nushell init template in src/commands/shell_init.zig that preserves behavior expectations:\n  - intercept wt new\n  - run wt new --porcelain\n  - on success plus valid directory, change into the new worktree\n  - print a concise confirmation line\n  - pass through all other subcommands to the binary\n- Ensure stderr/stdout routing remains correct for porcelain behavior.\n- Add or expand unit tests for Nushell template output and key behavior markers.\n- Add or expand CLI argument validation tests to include Nushell as supported.\n- Update README shell integration section with Nushell setup instructions and guarded snippets where applicable.\n- Update README supported-shells statement and troubleshooting notes.\n- Confirm shell-init output is usable in Nushell startup config.\n- Run mise run test and fix regressions.\n\nOpen decision to resolve during implementation:\n- Confirm canonical CLI shell key name (nu vs nushell) and document it consistently.\n\nAcceptance criteria:\n- wt shell-init works for the chosen Nushell key.\n- Unsupported-shell error message includes Nushell support.\n- README documents Nushell setup and verification.\n- Tests cover Nushell support and pass.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-23T12:16:16.305416Z","created_by":"jlg","updated_at":"2026-02-24T21:54:04.158906Z","closed_at":"2026-02-24T21:54:04.158891Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2er","title":"Remove GitHub release workflow until CI hardening","description":"Remove the tag-triggered .github/workflows/release.yml workflow for now and rely on the canonical mise release pipeline. Clean up any workflow-only artifacts/documentation references that become dead, while keeping release runbook guidance intact. Reintroduce automated GitHub workflow later during CI/GitHub hardening.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T06:43:54.447071Z","created_by":"jlgeering","updated_at":"2026-02-28T06:45:14.354704Z","closed_at":"2026-02-28T06:45:14.354684Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ev","title":"wt init Ctrl-C single-key cancel path is ineffective","description":"/Users/jlgeering/src/wt/src/commands/init.zig includes Ctrl-C cancellation logic in decision parsing, but tryReadSingleKey does not disable ISIG in raw mode (around lines 49-56). On POSIX terminals, Ctrl-C is handled as SIGINT before user-space key handling, so the intended cancel flow does not execute. /Users/jlgeering/src/wt/src/commands/rm.zig sets ISIG=false; init.zig should mirror that behavior if Ctrl-C is intended as an in-flow cancel.","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-22T14:13:08.916953Z","created_by":"jlgeering","updated_at":"2026-02-28T07:57:31.141040Z","closed_at":"2026-02-25T13:53:35.725936Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2ev","depends_on_id":"wt-3hb","type":"parent-child","created_at":"2026-02-28T07:57:31.141025Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-2f1","title":"[zli-swap] Replace yazap with zli command wiring","description":"Swap CLI parsing and help plumbing from yazap to zli in src/main.zig while keeping existing command handlers (list/new/rm/init/shell-init/internal picker) and behavior parity.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:25.692543Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676597Z","closed_at":"2026-02-24T20:41:07.676586Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2f1","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.948415Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-2fw","title":"Set up GitHub Releases distribution pipeline","description":"Define and implement a tag-driven release flow for wt: cross-build supported targets, package assets with stable names, generate SHA256 sums, and publish to GitHub Releases. Include release notes structure and verification steps.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-23T17:01:54.513402Z","created_by":"jlg","updated_at":"2026-02-25T13:48:44.634047Z","closed_at":"2026-02-25T13:48:44.634029Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2ha","title":"Remove file-based release version handoff in mise DAG","description":"The new mise-native release pipeline writes the requested version to dist/release/.current-version so downstream tasks can read it. This works, but it is an implementation workaround for current task-argument propagation limits. Follow up by replacing this file-based handoff with a cleaner native task-arg contract when mise/task syntax supports reliable dependency arg forwarding, while preserving one-command release behavior (mise run release -- <X.Y.Z>).","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-26T07:05:45.624176Z","created_by":"jlg","updated_at":"2026-02-26T07:05:45.624176Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2lc","title":"Avoid /dev/tty redirection in shell wrappers","description":"zsh/bash/fish shell-init wrappers route stderr as 2>/dev/tty during new|add porcelain capture. This can fail when no controlling TTY exists and bypasses caller redirection. Update wrappers to preserve stderr behavior across interactive and non-interactive contexts. Affected: src/commands/shell_init.zig (zsh,bash,fish new|add paths).","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-25T06:20:12.011327Z","created_by":"jlg","updated_at":"2026-02-25T14:35:29.813081Z","closed_at":"2026-02-25T14:35:29.813063Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2lc","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.897528Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-2le","title":"Cut first public GitHub release","description":"Execute the first public release of wt, including selecting the initial version (default recommendation: v0.1.0 to match current build.zig.zon).\n\nAcceptance criteria:\n- First-release version decision is recorded (e.g., v0.1.0).\n- Tag vX.Y.Z is created and pushed to github remote.\n- GitHub Release is published with release notes.\n- Release page verification is complete (tag, notes, latest status).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-25T06:31:00.861694Z","created_by":"jlg","updated_at":"2026-02-25T13:45:02.605591Z","closed_at":"2026-02-25T13:45:02.605571Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2p5","title":"wt init: unify repo/subfolder detection across setup types","description":"Broaden wt init detection behavior so repo-root vs subfolder detection is handled consistently for every setup detection type, not just mise trust command guidance.\n\nThis requirement includes any detection-driven action/path (for example: trust guidance, symlinked Claude settings, and similar setup detections). Define/implement a likely global detection solution so each detector uses shared repo/subfolder context rules instead of one-off logic. Also evaluate a common config-file strategy to centralize detection/setup policy so behavior remains consistent and easy to extend.\n\nOnly prompt/run/setup when needed based on detected state. Add tests that cover root and subfolder cases across representative detection types.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:13:21.071070Z","created_by":"jlgeering","updated_at":"2026-02-28T08:07:17.674540Z","closed_at":"2026-02-28T08:07:17.674523Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2p5","depends_on_id":"wt-3hb","type":"parent-child","created_at":"2026-02-28T07:57:31.139923Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-2rr","title":"Windows target build fails due POSIX termios usage","description":" fails. In  (around lines 102-120) and  (around lines 49-59), POSIX termios APIs (, , ) are referenced unconditionally. On Windows targets this triggers compile errors (including libc dependency and invalid termios type), breaking the advertised Windows build path.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-22T14:12:56.162788Z","created_by":"jlgeering","updated_at":"2026-02-25T13:36:03.456616Z","closed_at":"2026-02-25T13:36:03.456596Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2sb","title":"Support non-main default branch in rm local-commit checks","description":"Remove hardcoded assumptions that the primary branch is named 'main' when evaluating local commits for wt rm safety checks. Derive the base ref from the actual main worktree branch (or a robust fallback) so behavior is correct in repos using names like trunk, master, or develop.","notes":"Session checkpoint (2026-02-28):\n- Done:\n  - Reproduced branch-name-sensitive failures by forcing `git init.defaultBranch=master` and fixed integration tests to derive default branch dynamically (`rev-parse --abbrev-ref HEAD`).\n  - Committed: bef8c69 (`tests: remove hardcoded main branch in integration_lib`).\n  - Refactored setup logging to split machine vs silent modes; cleaned test output and kept machine warning behavior.\n  - Committed: 0605cbb (`setup: split machine vs silent logging modes`).\n  - Validation: `mise run test` clean; `zig build test --summary all` passes under default and forced master branch.\n- Remaining for wt-2sb scope:\n  - Implement/fix actual `wt rm` local-commit base-branch detection to stop assuming `main`; use main worktree branch (with robust fallback) in production code path.\n  - Add/adjust `wt rm` tests specifically covering non-main default branches for local-commit safety checks.\n- Exact next step:\n  - Run: `rg -n \"main|base_ref|countUnmergedCommits|local-commit|findWorktreeByBranch\" src/commands/rm.zig src/lib/worktree_status.zig src/lib/git.zig test`\n- Validation status:\n  - Current test suite green, but wt-2sb acceptance criteria not yet met because runtime rm path has not been updated.\n- Files touched this session:\n  - test/integration_lib.zig\n  - src/lib/setup.zig\n  - src/commands/new.zig\n  - test/integration_workflow.zig\n- Branch / commit:\n  - branch: main\n  - latest commit: 0605cbb","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-28T06:51:12.747224Z","created_by":"jlgeering","updated_at":"2026-02-28T08:35:48.198044Z","closed_at":"2026-02-28T08:35:48.198020Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2xa","title":"wt init: detect ignored local files within discovered subprojects","description":"Refine wt init detection so subproject discovery remains gitignore-aware, but exact/glob local setup files (e.g. .claude/settings.local.json, mise.local.toml variants) are detected from filesystem within discovered prefixes even if ignored. Preserve trust gating and add tests for ignored local files in discovered roots.","notes":"Refined init detection model: keep gitignore-aware subproject discovery, but match exact/glob local setup files from filesystem within discovered prefixes so ignored local files (e.g., **/.claude/settings.local.json, **/mise.local.toml) are still recommended. Updated planner matching logic for path and command triggers accordingly. Added regression tests for ignored local files in discovered subprojects and root. Updated ADR/spec nuance. Validated with mise run test and mise run check. Manual sanity check in /Users/jlgeering/src/clemap/magazzino now proposes subfolder Claude settings including piazza.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T09:59:22.451465Z","created_by":"jlgeering","updated_at":"2026-02-28T10:02:08.735668Z","closed_at":"2026-02-28T10:02:08.734380Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-2y7","title":"Filter detached branches from bash rm completion","description":"Bash __wt_complete_worktree_branches currently excludes only '-' and current worktree, but not '(detached)'. This can suggest invalid rm targets. Match zsh/fish/nu filtering behavior by excluding detached markers.","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-25T06:20:12.046324Z","created_by":"jlg","updated_at":"2026-02-25T14:36:12.213318Z","closed_at":"2026-02-25T14:36:12.213295Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-2y7","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.898047Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-2zc","title":"wt init: repo-wide cwd-invariant detection with bounded subproject scan","description":"Make wt init recommendation discovery cwd-invariant and repo-root anchored. Detect across repo root plus bounded subproject depth (default 2), skip hidden subproject roots, respect .gitignore via git-visible file discovery, and emit per-subproject run commands (e.g., cd <subdir> && mise trust) only where trust is already enabled. Add ADR/spec updates and robust tests for depth, ignore behavior, and command generation.","notes":"Implemented repo-wide cwd-invariant wt init detection. Added bounded subproject scanning (default depth 2) via git-visible paths (respects .gitignore), hidden-subproject pruning, and per-subproject run command generation (cd <subdir> && command) with per-prefix mise trust gating. Updated spec and added ADR superseding invocation-subdir default. Added comprehensive planner tests (invariance, depth limits/override, gitignore behavior, per-subproject commands, trust gating, dedupe). Validated with mise run test and mise run check.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T09:26:33.873212Z","created_by":"jlgeering","updated_at":"2026-02-28T09:35:05.348474Z","closed_at":"2026-02-28T09:35:05.347393Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-30s","title":"wt init review mode: Esc/Ctrl-C can trap prompt","description":"In wt init review mode (after declining apply-all), pressing Esc/Ctrl-C during per-change [Y/n] prompts can leave the user effectively stuck without a reliable cancel path. Repro: wt init -> n -> Enter at Choice [e/q] -> first Apply + ... [Y/n] prompt -> Esc/Ctrl-C does not exit. Add explicit cancel handling for review prompts and tests.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-28T08:18:41.407997Z","created_by":"jlgeering","updated_at":"2026-02-28T08:21:14.376114Z","closed_at":"2026-02-28T08:21:14.376089Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-31z","title":"wt init: decouple detection scanning from recommendation planner","description":"Refactor init detection so repository scanning/discovery logic is separated from recommendation planning. Introduce a dedicated detection/scanning module with focused unit tests, keep behavior unchanged, and update planner to consume the new API. Goal: easier and more robust testing without external repos.","notes":"Completed (2026-02-28)\n\nImplemented:\n- Wired src/lib/init_planner.zig to use src/lib/init_scan.zig APIs for scanning/discovery.\n- Removed duplicated scanning helpers from init_planner (listVisibleRepoPaths, collectRepoRootAndSubprojectPrefixes, listEntryNamesAtPrefix, pathExists).\n- Added init_scan export in src/lib/root.zig for module-level consistency.\n- Fixed const-correctness in init_scan.collectRepoRootAndSubprojectPrefixes signature.\n\nValidation:\n- mise run test: PASS\n- mise run check: FAIL (lint pre-existing in src/commands/list.zig from zig fmt --check; unrelated to this bead's changed files)","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T10:08:38.724835Z","created_by":"jlgeering","updated_at":"2026-02-28T10:14:44.277113Z","closed_at":"2026-02-28T10:14:44.277091Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-33s","title":"wt init: COW Elixir deps and _build folders","description":"For Elixir projects initialized with wt, apply copy-on-write behavior for dependency/build directories (deps and _build). Scope/strategy details are TBD; capture desired defaults and implement with tests once decided.","notes":"Implemented Elixir mix.exs-driven wt init recommendations for copy.paths (deps, _build) across repo root and bounded subproject prefixes. Added detection tests for root mapping, nested subprojects, default-depth exclusion, and expanded-depth inclusion. Added ADR and updated init/config spec. Validation: mise run format && mise run test.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:13:26.139775Z","created_by":"jlgeering","updated_at":"2026-02-28T10:35:52.944756Z","closed_at":"2026-02-28T10:27:58.545606Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-33s","depends_on_id":"wt-3hb","type":"parent-child","created_at":"2026-02-28T07:57:31.140495Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-33t","title":"Document and enforce Nushell stderr/TTY behavior in shell-init","description":"Add explicit coverage and documentation for Nushell external command stderr/TTY behavior in shell-init wrappers. Ensure wrapper paths that require interactivity route stderr safely, preserve expected exit-code semantics, and include a troubleshooting note explaining why TTY redirection is required.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-28T07:13:09.016314Z","created_by":"jlgeering","updated_at":"2026-02-28T07:13:09.016314Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-363","title":"wt init: add in-repo fixture for detection regression scenarios","description":"Add a dedicated in-repo test fixture tree for wt init detection scenarios (ignored local files in discovered subprojects) and add a fixture-backed test that copies fixture into tmp git repo and validates recommendations. This removes need for external repos like clemap/magazzino for validation.","notes":"Added in-repo fixture coverage path to avoid relying on external repos. Wired integration test module into build test graph. Added ignored fixture files under test/fixtures/init_detect_ignored_locals (mise.local.toml and .claude/settings.local.json) as tracked test assets so fixture-based detection scenarios are reproducible in clean clones.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T10:03:37.739098Z","created_by":"jlgeering","updated_at":"2026-02-28T10:07:26.731611Z","closed_at":"2026-02-28T10:07:26.731596Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3cl","title":"Enforce versioning strategy in release workflow","description":"Implement policy checks in release automation: require semver input, require matching changelog entry for target version, validate tag format vX.Y.Z, and verify built wt --version matches X.Y.Z before publishing.","status":"closed","priority":2,"issue_type":"task","assignee":"jlg","created_at":"2026-02-23T17:04:17.267993Z","created_by":"jlg","updated_at":"2026-02-28T06:43:54.447844Z","closed_at":"2026-02-28T06:43:54.447825Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3ek","title":"Fix help footer wording from parser dependency","description":"Current root help footer is malformed (shows wt <command> with -h/--h in broken format). Investigate dependency-level fix in yazap or upgrade/override so footer points users to wt <command> --help.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-23T16:02:31.709927Z","created_by":"jlg","updated_at":"2026-02-28T10:24:38.432233Z","closed_at":"2026-02-28T10:24:38.432217Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3hb","title":"Epic: wt init detection and setup behavior","description":"Unify wt init behavior and policy decisions for detection-driven setup actions.\n\nThis epic tracks all wt init beads that affect detection logic and initialization defaults, including trust detection, symlink policy, and language-specific workspace handling. The goal is a coherent strategy across detection types, with tests that validate behavior in root and subfolder contexts.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-28T07:57:27.625908Z","created_by":"jlgeering","updated_at":"2026-02-28T07:57:27.625908Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3hb.1","title":"wt init: make Elixir deps/_build recommendations umbrella-aware","description":"When mix.exs indicates an umbrella root (apps_path), wt init should recommend copy.paths deps/_build at the umbrella root but not for apps/* child projects. Keep non-umbrella nested mix projects unchanged. Add tests for root umbrella and nested umbrella cases plus docs/ADR updates.","notes":"Implemented umbrella-aware Elixir recommendation suppression for wt init: when a detected mix.exs prefix is under apps/* and its parent mix.exs declares apps_path, skip child deps/_build copy recommendations. Added tests for root umbrella and nested umbrella subproject cases (depth-expanded) while preserving non-umbrella behavior. Updated init/config spec and added ADR. Validation: mise run format && mise run test.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T11:46:11.758869Z","created_by":"jlgeering","updated_at":"2026-02-28T11:47:22.927563Z","closed_at":"2026-02-28T11:47:22.927535Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3hb.1","depends_on_id":"wt-3hb","type":"parent-child","created_at":"2026-02-28T11:46:11.758869Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-3hj","title":"Add PTY-based shell-init runtime tests for interactive picker flows","description":"Add PTY-driven integration coverage for shell-init wrappers so interactive picker behavior is validated under real TTY conditions. Cover no-arg wt invocation for zsh/bash/nu, verify picker launches, cancel path returns cleanly, and ensure no regressions around TTY-dependent internals in the pick-worktree command. Keep tests CI-safe with shell and tool availability guards.","notes":"Completed on branch codex-wt-3hj in commit 2e9796d. Added PTY-driven no-arg shell-init picker cancel coverage for zsh/bash/nu with shell/tool guards, plus build wiring for WT_TEST_WT_BIN. Validation: mise run test.","status":"closed","priority":1,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:12:58.735871Z","created_by":"jlgeering","updated_at":"2026-02-28T07:57:48.108203Z","closed_at":"2026-02-28T07:33:46.231164Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3j5","title":"Align bash new/add completion positional handling with other shells","description":"Bash completion currently offers refs only for one positional stage in new|add, while zsh/fish/nu provide positional-aware completion for branch and base args. Harmonize bash completion behavior for consistency.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:20:12.101817Z","created_by":"jlg","updated_at":"2026-02-26T08:08:49.182388Z","closed_at":"2026-02-26T08:08:49.182369Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3j5","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.898632Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-3lb","title":"Fix shell integration docs to include nu in zsh/fish shell-name completions","description":"docs/guides/shell-integration.md zsh and fish completion sections list shell-init targets as zsh/bash/fish, but implementation includes nu. Update docs to reflect current behavior and keep guide/spec parity.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:20:12.073953Z","created_by":"jlg","updated_at":"2026-02-25T14:37:37.462604Z","closed_at":"2026-02-25T14:37:37.462584Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3lb","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.898358Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-3mb","title":"[zli-swap] Epic: replace yazap with zli (+ minimal cleanup)","description":"Scope: library swap only. Replace yazap parsing/help wiring with zli, use native hidden commands for shell-init/internal picker, remove yazap dependency, keep feature parity with cleaner command wiring, and make minimal test/doc updates required by the swap. Explicitly out of scope: product redesign, migration plans, config format changes, rollout/canary strategy, platform matrix changes, or broad behavior changes.","notes":"Merged to main in commits 300cf4b (build wiring) and cbf80db (CLI migration). Rebased zli onto main before merge; worktree/branch zli cleaned up.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-24T20:29:52.878338Z","created_by":"jlg","updated_at":"2026-02-24T20:53:01.212407Z","closed_at":"2026-02-24T20:41:07.706452Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3ml","title":"Epic: Windows support for wt new setup execution","description":"Coordinate Windows runtime compatibility for `wt new` setup actions defined in `.wt.toml`.\n\nScope:\n- Eliminate hard dependency on POSIX tools/shells in setup execution paths.\n- Ensure `[copy]`, `[symlink]`, and `[run]` have explicit, tested Windows behavior.\n- Document any remaining platform constraints with clear runtime messaging.\n\nSuccess criteria:\n- Setup copy/run work in default Windows environments (no POSIX layer required), or unsupported behavior is explicitly gated with actionable warnings.\n- Windows setup behavior is covered by tests and contributor-facing docs.\n- Follow-up platform CI task(s) are linked to preserve runtime coverage.","notes":"Closed via commits 13560ed, 5319729, 3e2a880, ebce803 on branch codex-wt-3ml. Follow-up CI/runtime coverage tracked in wt-1ch (platform matrix + build:all gate).","status":"closed","priority":2,"issue_type":"epic","assignee":"jlgeering","created_at":"2026-02-25T06:15:00.288602Z","created_by":"jlg","updated_at":"2026-02-28T07:59:15.236198Z","closed_at":"2026-02-28T07:34:29.250787Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3ml.1","title":"Windows setup copy should not require cp","description":"`src/lib/setup.zig` currently shells out to `cp` for setup copy operations, which is not available by default on Windows. Implement a Windows-compatible copy path for `[copy].paths` (with existing safety checks and logging), and keep CoW/reflink behavior where available on Unix platforms.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-28T07:11:56.174973Z","created_by":"jlgeering","updated_at":"2026-02-28T07:31:55.976181Z","closed_at":"2026-02-28T07:31:55.976164Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3ml.1","depends_on_id":"wt-3ml","type":"parent-child","created_at":"2026-02-28T07:11:56.174973Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-3ml.2","title":"Windows setup run commands should not require sh","description":"`src/lib/setup.zig` currently executes `[run].commands` via `sh -c`, which fails on stock Windows environments. Implement OS-aware setup command execution (Windows and non-Windows paths), preserve current UX/logging semantics, and add targeted tests for command invocation behavior and failure handling.","status":"closed","priority":1,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-28T07:11:56.175890Z","created_by":"jlgeering","updated_at":"2026-02-28T07:33:08.563682Z","closed_at":"2026-02-28T07:33:08.563665Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3ml.2","depends_on_id":"wt-3ml","type":"parent-child","created_at":"2026-02-28T07:11:56.175890Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-3ml.3","title":"Document and test Windows setup semantics for wt new","description":"Add/extend tests and documentation for `.wt.toml` setup behavior on Windows (`[copy]`, `[symlink]`, `[run]`), including explicit expectations for unsupported operations and user-facing warning messages where fallbacks are required.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:11:56.184346Z","created_by":"jlgeering","updated_at":"2026-02-28T07:34:09.360814Z","closed_at":"2026-02-28T07:34:09.360797Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3ml.3","depends_on_id":"wt-3ml","type":"parent-child","created_at":"2026-02-28T07:11:56.184346Z","created_by":"jlgeering","metadata":"{}","thread_id":""}]}
{"id":"wt-3n9","title":"Refactor shell-init generation into per-shell emitters + shared helpers","description":"Split src/commands/shell_init.zig into per-shell emitters with shared helper functions and a documented behavior contract. Preserve current external behavior while reducing duplication and accidental divergence across zsh/bash/fish/nu implementations.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:29:09.674722Z","created_by":"jlg","updated_at":"2026-02-26T08:11:12.618560Z","closed_at":"2026-02-26T08:11:12.618542Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3n9","depends_on_id":"wt-1od","type":"blocks","created_at":"2026-02-25T06:29:09.812044Z","created_by":"jlg","metadata":"{}","thread_id":""},{"issue_id":"wt-3n9","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.899999Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-3ob","title":"Release 0.2.1","description":"Prepare and publish patch release v0.2.1 via canonical release pipeline","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:19:39.055989Z","created_by":"jlgeering","updated_at":"2026-02-28T07:21:14.635787Z","closed_at":"2026-02-28T07:21:14.635765Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3rp","title":"Add Homebrew tap formula for wt","description":"Create and maintain a Homebrew tap/formula for wt that consumes GitHub Release assets. Depends on finalizing GitHub release artifact naming and checksum process from the GitHub Releases task.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-23T17:01:54.515300Z","created_by":"jlg","updated_at":"2026-02-23T17:02:48.663551Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3rp","depends_on_id":"wt-2fw","type":"blocks","created_at":"2026-02-23T17:02:48.663519Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-3ta","title":"Evaluate shell-init generation model for long-term cross-shell robustness","description":"Review current shell-init architecture (per-shell emitters plus shared behavior helpers) and produce a concrete decision record for scaling support across shells. Include tradeoffs, failure modes found in recent Nushell TTY bug, and a prioritized plan for improvements (shared runtime behavior model, test strategy, and shell-specific escape hatches).","status":"in_progress","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-28T07:13:11.965166Z","created_by":"jlgeering","updated_at":"2026-02-28T10:28:57.135694Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-3vm","title":"[zli-swap] Remove yazap dependency and update build wiring","description":"Update build.zig/build.zig.zon imports/deps to remove yazap and add zli; ensure zig build run/test still resolve dependencies correctly.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:31.214586Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.675685Z","closed_at":"2026-02-24T20:41:07.675669Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-3vm","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949573Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-4b5","title":"Clarify local-commit helper naming semantics","description":"Rename the git helper currently named countPatchUniqueCommits to a name that matches its actual behavior (non-equivalent local commits using rev-list --right-only --cherry-pick), and update call sites/comments for clarity.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-28T06:51:04.054799Z","created_by":"jlgeering","updated_at":"2026-02-28T06:51:04.054799Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-4xl","title":"Investigate help wrapping in yazap","description":"Follow up on weird wrapping/large spacing in wt --help on smaller terminals. We deferred local custom help output; later evaluate whether yazap exposes configurable help column widths or if we should upstream a fix.","notes":"Investigation result (2026-02-25):\n- `yazap` is no longer present in this repository (migrated parser stack to zli in prior work).\n- Help output now comes from static usage/help strings in src/main.zig and is smoke-tested in build.zig.\n- Manual check at default width and COLUMNS=60 shows no prior yazap-style spacing pathology; output is stable.\n- Remaining narrow-terminal readability concerns are now separate from yazap and should be tracked as independent formatting improvements if needed.","status":"closed","priority":4,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-23T15:23:17.532403Z","created_by":"jlg","updated_at":"2026-02-25T14:17:55.381193Z","closed_at":"2026-02-25T14:17:55.381170Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-87x","title":"Add SECURITY.md vulnerability reporting policy","description":"Document a security reporting path for responsible disclosure.\n\nAcceptance criteria:\n- SECURITY.md exists at repo root or .github/.\n- Includes supported versions (or policy statement) and private reporting instructions.\n- GitHub repository shows security policy is configured.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-25T06:25:51.340177Z","created_by":"jlg","updated_at":"2026-02-25T06:25:51.340177Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-8mi","title":"Investigate testing strategy for platform-specific code","description":"Investigate and document ways to test platform-specific code paths (macOS, Linux, Windows) for `wt`.\n\nExpected output:\n- Candidate matrix for local/CI coverage.\n- Strategies for cross-target compile checks vs runtime checks.\n- Practical options for validating OS-conditional behavior and interactive terminal logic.\n- Tradeoffs, limitations, and recommended path.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-22T14:19:08.866969Z","created_by":"jlgeering","updated_at":"2026-02-25T14:09:41.777699Z","closed_at":"2026-02-25T14:09:41.777677Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-92n","title":"Add ahead/behind to wt list output","description":"Enhance wt list to show upstream ahead/behind counts per branch. Add git helper(s) to compute counts and include them in list formatting for clean/dirty worktrees. Handle detached HEAD and missing upstreams gracefully.","status":"closed","priority":2,"issue_type":"task","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:23Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-25T13:52:20.950771Z","closed_at":"2026-02-25T13:52:20.950754Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-erf","title":"wt rm can remove detached worktrees with unique commits without warning","description":"## Summary\nwt rm currently skips local commit safety checks for detached worktrees. A detached worktree with unique commits can be classified as safe when clean and removed without confirmation.\n\n## Evidence\n- has_local_commits only computed when branch is non-null: src/commands/rm.zig:531-535\n- safe classification uses has_local_commits flag: src/commands/rm.zig:537-546\n- unsafe confirmation gate depends on safe flag: src/commands/rm.zig:624-648\n\n## Expected\nDetached worktrees should still trigger a local-commit safety check against main before non-force removal proceeds.\n\n## Risk\nPotential silent commit loss in detached worktrees.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-25T06:15:00.288588Z","created_by":"jlg","updated_at":"2026-02-25T13:45:40.070209Z","closed_at":"2026-02-25T13:45:40.068921Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-g5w","title":"Unify completion candidate generation after 4-shell rollout","description":"After completion support exists for all four target shells, move branch/ref candidate generation out of shell scripts into shared wt runtime code (for example internal completion subcommands) so zsh/bash/fish/4th shell use one source of truth for local branches, refs, and rm candidates. Keep shell adapters thin and shell-specific only for rendering.","status":"closed","priority":3,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-24T21:55:15.863652Z","created_by":"jlg","updated_at":"2026-02-26T08:15:08.830674Z","closed_at":"2026-02-26T08:15:08.830653Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-g5w","depends_on_id":"wt-1od","type":"blocks","created_at":"2026-02-25T06:29:09.783056Z","created_by":"jlg","metadata":"{}","thread_id":""},{"issue_id":"wt-g5w","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.898933Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-gzx","title":"Dynamic picker widths for long branch names","description":"Adjust picker row layout to handle long branch names and avoid column misalignment. Implement dynamic or capped width sizing for branch/status columns so FZF and builtin views remain readable when branch names are long.","status":"closed","priority":3,"issue_type":"task","assignee":"jlg","created_at":"2026-02-23T15:57:46.375212Z","created_by":"jlg","updated_at":"2026-02-24T20:15:30.909814Z","closed_at":"2026-02-24T20:15:30.909799Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-k36","title":"Reduce shell docs drift via generated shell-name/completion sections","description":"Generate or validate shell integration documentation snippets from shared CLI/shell metadata so guide/spec text stays synchronized with implementation-supported shell targets and completion surfaces.","status":"closed","priority":4,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-25T06:29:09.702460Z","created_by":"jlg","updated_at":"2026-02-26T08:16:47.053730Z","closed_at":"2026-02-26T08:16:47.053710Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-k36","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.900259Z","created_by":"jlg","metadata":"{}","thread_id":""},{"issue_id":"wt-k36","depends_on_id":"wt-3n9","type":"blocks","created_at":"2026-02-25T06:29:09.839669Z","created_by":"jlg","metadata":"{}","thread_id":""},{"issue_id":"wt-k36","depends_on_id":"wt-g5w","type":"blocks","created_at":"2026-02-25T06:29:09.867978Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-lcy","title":"Investigate testing strategy for shell integrations","description":"Investigate and document ways to test `wt shell-init` integrations (zsh/bash) in automated and local workflows.\n\nExpected output:\n- Candidate approaches (unit-level, integration-level, shell-level harnesses).\n- How to validate behavior like `wt new --porcelain` capture, `cd` handoff, and stderr/stdout routing.\n- Tradeoffs, reliability risks, and recommended path.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","created_at":"2026-02-22T14:19:08.819340Z","created_by":"jlgeering","updated_at":"2026-02-25T14:00:57.374678Z","closed_at":"2026-02-25T14:00:57.374659Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-lcy","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.899199Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-lgk","title":"[zli-swap] Use zli hidden commands for shell-init/internal commands","description":"Mark shell-init and internal picker command as hidden/private via zli instead of pre-parse hacks so wt --help only shows public commands.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-24T20:28:29.169254Z","created_by":"jlg","updated_at":"2026-02-24T20:41:07.676258Z","closed_at":"2026-02-24T20:41:07.676248Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-lgk","depends_on_id":"wt-3mb","type":"parent-child","created_at":"2026-02-24T20:29:54.949136Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-lol","title":"Detect rebased-equivalent commits in wt rm safety check","description":"wt rm currently marks a worktree as having local commits using ancestry counts only (main..branch). After rebasing main, equivalent patches can appear as local commits even though their changes are already on main. Add detection so rebased/cherry-picked equivalent commits do not trigger local-commits warnings/prompts.","notes":"Progress checkpoint (2026-02-28):\n- Done: Committed local-commit safety fix in wt rm to ignore patch-equivalent rebased/cherry-picked commits (889c936), then polished after code review by switching patch-unique counting to 'git rev-list --right-only --cherry-pick base...branch' to preserve merge-only local history detection while still suppressing equivalent patches (b3ffb10).\n- Done: Added/updated tests in test/integration_lib.zig for (a) patch-equivalent commit case => unmerged=1 and patch_unique=0, and (b) merge-only local commit case => patch_unique remains 1.\n- Done: Code review pass completed; no remaining blocking findings in this branch.\n- Remaining: Optional manual end-to-end validation of wt rm prompt behavior in a live rebased-main scenario, then close bead.\n- Exact next command/step: cd /Users/jlgeering/src/wt--codex-wt-lol-rebased-local-commits && mise x -- br close wt-lol --reason=\"Completed\" (after optional manual e2e check).\n- Validation status: mise run check passed; mise run test passed after final commit.\n- Files touched: /Users/jlgeering/src/wt--codex-wt-lol-rebased-local-commits/src/commands/rm.zig, /Users/jlgeering/src/wt--codex-wt-lol-rebased-local-commits/src/lib/git.zig, /Users/jlgeering/src/wt--codex-wt-lol-rebased-local-commits/test/integration_lib.zig.\n- Branch/SHA: codex-wt-lol-rebased-local-commits @ b3ffb101d92057ce0dc8a4389784ec3483e5dd48.","status":"closed","priority":2,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-28T06:36:59.829831Z","created_by":"jlgeering","updated_at":"2026-02-28T06:59:31.703926Z","closed_at":"2026-02-28T06:59:31.703905Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-nk2","title":"Investigate testing strategy for shell integrations and platform-specific code","description":"Investigate and document practical approaches for:\n\n1. Testing shell integrations (`wt shell-init` wrappers) in automated and local workflows.\n2. Testing platform-specific code paths (macOS/Linux/Windows) with reliable CI and local verification strategies.\n\nExpected output:\n- Proposed test matrix and tool choices.\n- Tradeoffs/limitations for each approach.\n- Recommended next implementation steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T14:18:25.543147Z","created_by":"jlgeering","updated_at":"2026-02-22T14:19:08.911043Z","closed_at":"2026-02-22T14:19:08.911022Z","close_reason":"Split into focused tasks: wt-lcy and wt-8mi","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-vc3","title":"Expand integration coverage for list and rm safety behavior","description":"Add integration tests for list ahead/behind output and rm safety flows, including dirty worktree handling, unmerged commit detection, confirmation behavior, and --force bypass.","status":"closed","priority":2,"issue_type":"task","assignee":"jlgeering","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:24Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-25T13:55:37.933118Z","closed_at":"2026-02-25T13:55:37.933100Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-vc3","depends_on_id":"wt-92n","type":"blocks","created_at":"2026-02-18T06:51:24Z","created_by":"Jean-Luc Geering","metadata":"{}","thread_id":""},{"issue_id":"wt-vc3","depends_on_id":"wt-w1c","type":"blocks","created_at":"2026-02-18T06:51:24Z","created_by":"Jean-Luc Geering","metadata":"{}","thread_id":""}]}
{"id":"wt-vhr","title":"wt new treats tags/refs as existing branches","description":"/Users/jlgeering/src/wt/src/commands/new.zig checks branch existence with \"git rev-parse --verify <name>\" (around line 49). This resolves tags and other refs, not just local branches. Repro: in a repo with tag \"demo\" and no branch \"demo\", \"wt new --porcelain demo\" creates a detached worktree instead of a branch-backed worktree. Branch checks should target refs/heads/<branch> explicitly.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-22T14:13:08.859348Z","created_by":"jlgeering","updated_at":"2026-02-25T13:51:56.667870Z","closed_at":"2026-02-25T13:51:56.667852Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-w1c","title":"Strengthen wt rm safety checks and confirmation flow","description":"Enhance wt rm to detect unmerged commits before removal and require interactive confirmation for unsafe removals (dirty or unmerged) unless --force is provided.","status":"closed","priority":1,"issue_type":"task","assignee":"jlgeering","owner":"jlgeering@users.noreply.github.com","created_at":"2026-02-18T05:51:24Z","created_by":"Jean-Luc Geering","updated_at":"2026-02-25T13:32:10.289560Z","closed_at":"2026-02-25T13:32:10.289539Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-wb0","title":"Protect main branch with required checks","description":"Configure branch protection for main to reduce risk from direct pushes and regressions.\n\nAcceptance criteria:\n- main requires pull requests before merge.\n- Required status checks are enabled for CI workflow(s).\n- Force pushes and branch deletion are disabled for main.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-25T06:25:51.340177Z","created_by":"jlg","updated_at":"2026-02-25T06:25:51.340177Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-x4p","title":"wt new resolves tags as branches and creates detached worktrees","description":"Branch existence is checked with git rev-parse --verify NAME, which matches tags and other refs. When a tag matches the requested name, wt new logs Using existing branch but creates a detached worktree. Expected: validate against refs/heads/NAME or an equivalent branch-only check before taking the existing-branch path.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-23T16:01:25.946223Z","created_by":"jlg","updated_at":"2026-02-25T13:45:40.068526Z","closed_at":"2026-02-25T13:45:40.068505Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0}
{"id":"wt-xrn","title":"Shell completions omit supported 'nushell' alias for shell-init","description":"## Summary\nwt shell-init accepts both nu and nushell, but generated completion suggestions only offer nu (zsh/bash/fish/nu completion sources), so one valid input is undiscoverable.\n\n## Evidence\n- Runtime accepts alias: src/commands/shell_init.zig:806\n- Completion candidates generated from shell_name_choices (zsh bash fish nu)\n\n## Expected\nCompletions should include every accepted shell alias, or runtime should reject undocumented aliases consistently.\n\n## Scope\n- zsh completion output\n- bash completion output\n- fish completion output\n- nushell completion helper output\n- tests asserting shell name completions\n","status":"closed","priority":3,"issue_type":"bug","assignee":"jlgeering","created_at":"2026-02-25T06:14:28.933386Z","created_by":"jlg","updated_at":"2026-02-25T14:37:16.437997Z","closed_at":"2026-02-25T14:37:16.437978Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"wt-xrn","depends_on_id":"wt-1uz","type":"parent-child","created_at":"2026-02-25T06:29:09.899475Z","created_by":"jlg","metadata":"{}","thread_id":""}]}
{"id":"wt-zb6","title":"Align integration test variable names with commit semantics","description":"In integration tests for local-commit detection, rename variables and assertions that currently imply patch-only uniqueness so they match actual semantics (non-equivalent local commits, including merge-only local history). Keep tests easy to scan and maintain.","status":"open","priority":4,"issue_type":"task","created_at":"2026-02-28T06:51:09.312506Z","created_by":"jlgeering","updated_at":"2026-02-28T06:51:09.312506Z","source_repo":".","compaction_level":0,"original_size":0}
