# ADR: Shell-Init No-Arg Picker Is Interactive-Only

- Status: Accepted
- Date: 2026-02-28
- Decision Makers: wt maintainers

## Context

Shell wrappers generated by `wt shell-init` intercept bare `wt` (no args) to run `__pick-worktree` and change directories. This behavior is useful in interactive terminals, but adds unnecessary complexity in non-interactive sessions (scripts, CI, shell `-c` runs) where picker UX is not meaningful.

We want to simplify wrapper behavior without regressing interactive navigation or `wt new|add` auto-`cd` flows.

## Decision

1. Bare wrapper `wt` no-arg picker behavior is interactive-only.
2. In non-interactive sessions, bare wrapper `wt` passes through to the real `wt` binary.
3. `wt new|add` wrapper behavior remains unchanged in both interactive and non-interactive sessions.
4. `wt rm` behavior remains command-level and unchanged.
5. Nushell keeps its interactive picker stderr adapter (`err> /dev/tty` with fallback) inside the interactive no-arg branch.

## Consequences

- Simpler wrapper control flow for non-interactive execution paths.
- Clearer docs and test contract: picker behavior is explicitly human/interactive only.
- Scripts that source shell wrappers and call bare `wt` now observe plain binary behavior (typically root help/exit semantics) instead of wrapper picker attempts.
- Interactive users retain existing picker UX and `new|add` auto-`cd` behavior.

## References

- `docs/adr/2026-02-24-wt-shell-init-preserve-subdir-on-no-arg-picker.md`
- `docs/adr/2026-02-24-wt-shell-init-preserve-subdir-on-create.md`
- `docs/adr/2026-02-28-wt-shell-init-cross-shell-robustness-model.md`
- `src/commands/shell_init.zig`
- `test/integration_shell_init.zig`
